<pre>
<h3>Manual download file from query test</h3>:

<button id="json">JSON</button>
<button id="csv">CSV</button>
<button id="tsv">TSV</button>
<button id="xlsx">XLSX</button>

<script>

async function createListener(url) {
 try {     
    const response = await fetch(url, {
      method: 'post',
      headers: {'Content-Type': 'application/json'},
      body:JSON.stringify({ query: `
      query MyQuery {
        test_table(limit: 10) {
            float_column
            int_column
            text_column
            time_column
        }
      }`})
    })
    console.log('Completed!', response)
  } catch(err) {
    console.error(`Error: ${err}`)
  }
}

document.getElementById('json').addEventListener('click', async _ => createListener('/v1/download'))
document.getElementById('csv').addEventListener('click', async _ => createListener('/v1/download?format=csv'))
document.getElementById('tsv').addEventListener('click', async _ => createListener('/v1/download?format=csv&field_separator=%09'))
document.getElementById('xlsx').addEventListener('click', async _ => createListener('/v1/download?format=xlsx'))


</script>

</pre>
